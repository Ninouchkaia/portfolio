
#!/usr/bin/python
# -*- coding: utf-8 -*-
# jupyter notebook --browser='C:/Program Files (x86)/Google/Chrome/Application/chrome.exe %s'


import timeit
start = timeit.default_timer()

import sys
import os
import csv
from operator import itemgetter
import networkx as nx
from networkx.algorithms import community
import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd
from collections import Counter
from collections import defaultdict
from collections import OrderedDict
import statistics 
import re
import gzip



# nodefiles_numbers = []
# edgefiles_numbers = []
# for filename in os.listdir("A:\\Downloads\\Projects\\workFromHome\\Projects\\Covid\\random_networks\\Mock_networks_21Apr"):
# 	if 'nodes_' in filename :
# 		filename = filename.split(".csv")[0]
# 		nodefiles_numbers.append(int(filename[19:]))
# 	if 'edges_' in filename :
# 		filename = filename.split(".csv")[0]
# 		edgefiles_numbers.append(int(filename[19:]))

# # log_write.write("len(nodefiles_numbers) = %s\n" % len(nodefiles_numbers)) #2051
# # log_write.write("len(edgefiles_numbers) = %s\n" % len(edgefiles_numbers)) #2051
# # log_write.write("difference between edgefiles_numbers and nodefiles_numbers = %s\n" % len(set(nodefiles_numbers).difference(set(edgefiles_numbers)))) #0

# nodefiles_numbers = sorted(nodefiles_numbers)
# edgefiles_numbers = sorted(edgefiles_numbers)

# networks_to_avoid = [3, 11, 22, 23, 33, 34, 38, 57, 72, 77, 123, 127, 148, 156, 157, 183, 205, 209, 210, 217, 232, 252, 268, 281, 291, 312, 341, 353, 362, 364, 413, 421, 433, 443, 451, 494, 525, 532, 569, 592, 629, 658, 662, 674, 676, 701, 705, 712, 736, 757, 788, 796, 825, 827, 838, 873, 876, 908, 910, 916, 917, 918, 938, 958, 965, 1088, 1125, 1128, 1145, 1146, 1165, 1171, 1183, 1185, 1192, 1195, 1211, 1244, 1254, 1257, 1300, 1353, 1354, 1364, 1372, 1394, 1395, 1401, 1410, 1427, 1454, 1477, 1497, 1517, 1532, 1549, 1551, 1575, 1578, 1611, 1624, 1629, 1637, 1650, 1655, 1697, 1700, 1713, 1736, 1745, 1762, 1790, 1800, 1815, 1824, 1827, 1866, 1872, 1886, 1887, 2053, 2072, 2106, 2115, 2128, 2160, 2217, 2343, 2383, 2388, 2413, 2458, 2465]
# nodefiles_numbers = [item for item in nodefiles_numbers if item not in networks_to_avoid]

# protein_nodes_total = []
# ppi_total = []

# for iteration in nodefiles_numbers[1:] :
# 	print("\n########################## ITERATION %s  ###########################\n" % (iteration))
# 	# log_write.write("\n########################## ITERATION %s ###########################\n" % iteration)

# 	with open('A:\\Downloads\\Projects\\workFromHome\\Projects\\Covid\\random_networks\\Mock_networks_21Apr\\COVID19_GDDS_nodes_%s.csv' % str(iteration), 'r') as nodecsv: # Open the file                   
# 		nodereader = csv.reader(nodecsv) # Read the csv  
# 		nodes = [n for n in nodereader][1:]                     
# 		node_names = [n[0] for n in nodes] # Get a list of only the node names 

# 	with open('A:\\Downloads\\Projects\\workFromHome\\Projects\\Covid\\random_networks\\Mock_networks_21Apr\\COVID19_GDDS_edges_%s.csv' % str(iteration), 'r') as edgecsv: # Open the file
# 		edgereader = csv.reader(edgecsv) # Read the csv     
# 		edges = [tuple(e) for e in edgereader][1:] # Retrieve the data

# 		# log_write.write("len(node_names) : %s\n" % len(node_names)) #16007 --> 13448
# 		# log_write.write("len(edges) : %s\n" % len(edges)) #53917 --> 37835

# 	G_random = nx.Graph()
# 	G_random.add_nodes_from(node_names)
# 	G_random.add_edges_from(edges)

# 	descr_dict_random = {}
# 	description_random_set=set()
# 	for node in nodes: 
# 		descr_dict_random[node[0]] = node[2]
# 		description_random_set.add(node[2])

# 	protein_nodes = [node for node in descr_dict_random if descr_dict_random[node] == 'Human PPI (target)']
# 	protein_nodes_total.append(len(protein_nodes))

# 	# print(nx.info(G_random))
# 	# log_write.write("\nRANDOM GRAPH %s\n" % iteration)
# 	# log_write.write("%s\n" % nx.info(G_random))

# 	#####################################################################################################
# 	################################# GET EDGES CONNECTING sources TO proteins ################
# 	#####################################################################################################

# 	ppi = 0
# 	for u,v,c in G_random.edges(data=True) :	
# 		if (descr_dict_random[u] == 'Human PPI (target)' and descr_dict_random[v] == 'Human PPI (target)') :
# 			ppi = ppi + 1
	
# 	ppi_total.append(ppi)

# print("protein_nodes_total", protein_nodes_total)
# print("ppi_total", ppi_total)


# ppi_total = [354, 367, 389, 420, 350, 343, 384, 343, 379, 467, 295, 363, 405, 369, 347, 457, 319, 275, 365, 327, 370, 437, 307, 428, 361, 419, 414, 342, 492, 229, 423, 337, 312, 460, 442, 407, 416, 414, 368, 372, 366, 497, 300, 431, 352, 426, 348, 367, 527, 392, 427, 453, 336, 445, 391, 377, 373, 695, 323, 417, 465, 348, 337, 383, 437, 336, 426, 347, 354, 419, 347, 399, 431, 426, 357, 422, 437, 367, 296, 339, 327, 358, 317, 438, 365, 402, 383, 492, 332, 353, 445, 364, 294, 454, 426, 448, 416, 309, 393, 360, 405, 444, 466, 489, 515, 351, 307, 265, 405, 304, 287, 254, 308, 350, 338, 336, 270, 330, 403, 310, 385, 308, 418, 335, 387, 483, 431, 379, 371, 425, 381, 392, 417, 373, 346, 315, 391, 281, 389, 252, 461, 361, 371, 356, 293, 386, 404, 390, 381, 331, 321, 296, 393, 336, 369, 345, 477, 514, 421, 290, 454, 339, 401, 338, 361, 307, 459, 389, 309, 404, 288, 476, 347, 300, 374, 339, 333, 417, 402, 340, 386, 291, 349, 416, 325, 390, 317, 496, 290, 440, 385, 413, 380, 319, 442, 260, 353, 364, 376, 352, 314, 447, 348, 379, 385, 435, 410, 321, 381, 419, 333, 467, 442, 444, 296, 383, 424, 453, 356, 407, 358, 353, 337, 361, 349, 370, 332, 364, 450, 422, 393, 353, 366, 457, 415, 400, 423, 355, 297, 305, 407, 484, 343, 345, 315, 301, 465, 357, 327, 356, 309, 379, 458, 289, 426, 512, 337, 360, 368, 335, 401, 420, 372, 349, 443, 422, 257, 329, 396, 483, 384, 285, 411, 358, 396, 367, 345, 355, 441, 570, 271, 388, 345, 407, 418, 391, 368, 355, 434, 368, 306, 404, 386, 357, 326, 423, 423, 404, 402, 328, 448, 459, 436, 324, 343, 375, 320, 599, 423, 326, 340, 399, 496, 391, 447, 505, 449, 402, 476, 323, 539, 444, 482, 488, 359, 457, 414, 295, 556, 310, 396, 378, 364, 391, 459, 313, 371, 375, 436, 405, 410, 425, 364, 307, 399, 393, 406, 371, 448, 288, 360, 405, 341, 406, 387, 373, 449, 487, 380, 297, 354, 428, 331, 431, 351, 364, 372, 349, 457, 347, 532, 365, 337, 334, 421, 363, 346, 352, 465, 483, 408, 376, 355, 453, 311, 367, 356, 429, 361, 466, 389, 395, 329, 454, 325, 321, 232, 447, 352, 408, 440, 338, 434, 428, 364, 367, 397, 309, 282, 347, 461, 497, 463, 435, 478, 315, 320, 566, 342, 396, 418, 343, 413, 445, 389, 411, 469, 337, 479, 358, 394, 473, 357, 445, 425, 429, 306, 368, 322, 472, 446, 288, 364, 352, 355, 344, 388, 392, 373, 331, 352, 403, 506, 372, 352, 435, 378, 413, 476, 534, 353, 380, 353, 407, 362, 375, 324, 337, 305, 532, 449, 409, 378, 426, 318, 501, 422, 330, 478, 398, 424, 330, 376, 459, 306, 349, 337, 396, 364, 317, 396, 381, 395, 442, 404, 387, 340, 247, 389, 414, 393, 439, 272, 391, 344, 420, 373, 341, 308, 406, 395, 314, 326, 471, 434, 465, 362, 481, 352, 333, 428, 338, 291, 341, 253, 412, 468, 284, 305, 361, 311, 287, 415, 363, 472, 345, 353, 398, 344, 365, 338, 548, 321, 351, 293, 267, 336, 525, 253, 333, 313, 410, 420, 311, 389, 344, 378, 390, 405, 421, 307, 358, 338, 418, 435, 330, 462, 408, 450, 379, 352, 368, 288, 362, 440, 292, 366, 335, 522, 456, 409, 422, 390, 393, 356, 346, 313, 435, 312, 311, 488, 488, 309, 349, 387, 268, 460, 409, 284, 332, 469, 360, 357, 272, 376, 385, 334, 327, 312, 446, 326, 380, 460, 346, 296, 399, 282, 369, 317, 346, 400, 403, 448, 355, 413, 332, 396, 493, 465, 392, 489, 337, 447, 387, 419, 445, 605, 282, 308, 291, 436, 268, 346, 352, 474, 286, 395, 391, 313, 323, 325, 326, 416, 384, 430, 490, 275, 347, 341, 407, 369, 400, 389, 484, 334, 421, 417, 331, 527, 386, 439, 369, 299, 356, 484, 382, 355, 393, 413, 315, 397, 415, 313, 462, 448, 264, 407, 403, 520, 389, 391, 377, 391, 233, 354, 307, 364, 444, 390, 379, 372, 341, 477, 500, 396, 444, 460, 556, 415, 276, 347, 397, 274, 417, 446, 380, 244, 284, 422, 332, 380, 483, 488, 363, 346, 423, 311, 376, 381, 305, 375, 368, 428, 422, 410, 484, 424, 416, 362, 374, 346, 479, 470, 397, 396, 429, 356, 421, 270, 562, 463, 283, 447, 311, 393, 561, 568, 487, 430, 412, 416, 474, 477, 356, 342, 322, 439, 392, 304, 283, 349, 397, 372, 374, 431, 367, 429, 518, 367, 455, 495, 341, 349, 476, 382, 289, 440, 333, 445, 345, 293, 276, 279, 332, 478, 426, 363, 356, 325, 460, 427, 432, 460, 377, 373, 353, 443, 377, 428, 445, 339, 425, 371, 331, 303, 295, 399, 427, 409, 373, 337, 319, 291, 435, 445, 498, 409, 376, 341, 538, 338, 379, 478, 342, 354, 309, 579, 342, 341, 416, 374, 430, 408, 505, 373, 379, 412, 356, 401, 405, 314, 445, 296, 351, 567, 416, 393, 369, 372, 351, 415, 365, 370, 285, 443, 470, 492, 332, 390, 378, 363, 332, 404, 390, 307, 385, 362, 425, 481, 435, 275, 487, 344, 401, 450, 456, 423, 343, 359, 329, 352, 446, 305, 309, 330, 419, 450, 330, 403, 527, 385, 425, 335, 375, 422, 353, 279, 487, 550, 283, 350, 388, 430, 297, 541, 393, 350, 362, 420, 291, 322, 359, 344, 390, 367, 367, 381, 415, 506, 371, 385, 618, 475, 345, 410, 292, 467, 404, 440, 325, 439, 422, 424, 476, 576, 397, 446, 373, 337, 404, 305, 497, 525, 335, 373, 380, 437, 463, 346, 392, 278, 309, 361, 424, 397, 417, 332, 474, 292, 369, 457, 389, 342, 461, 381, 325, 306, 285, 437, 460, 313, 412, 341, 319, 396, 347, 549, 373, 449, 329, 370, 471, 423, 440, 362, 362, 378, 353, 420, 464, 273, 334, 374, 416, 387, 385, 457, 383, 445, 310, 310, 392, 369, 351, 458, 373, 362, 419, 428, 404, 350, 543, 474, 373, 424, 572, 458, 331, 460, 441, 467, 489, 430, 356, 389, 437, 413, 428, 416, 472, 416, 429, 416, 275, 413, 295, 434, 395, 325, 360, 392, 462, 447, 401, 392, 408, 486, 394, 468, 535, 318, 381, 349, 393, 394, 666, 345, 405, 443, 353, 445, 526, 467, 405, 307, 426, 366, 379, 359, 387, 377, 446, 281, 361, 405, 350, 408, 537, 423, 336, 381, 261, 418, 306, 352, 461, 390, 380, 446, 381, 304, 295, 306, 338, 324, 329, 365, 592, 436, 397, 515, 359, 437, 445, 292, 463, 395, 400, 473, 354, 424, 318, 490, 413, 336, 370, 402, 453, 399, 308, 286, 532, 427, 340, 401, 432, 299, 540, 622, 385, 305, 414, 413, 554, 344, 373, 376, 320, 483, 345, 301, 392, 349, 476, 319, 384, 363, 447, 467, 291, 289, 312, 463, 462, 342, 386, 528, 345, 379, 586, 484, 310, 338, 370, 243, 426, 554, 411, 349, 509, 303, 369, 395, 460, 452, 436, 409, 318, 399, 388, 427, 371, 334, 256, 407, 366, 319, 452, 344, 510, 449, 319, 372, 403, 420, 397, 379, 368, 406, 378, 379, 372, 240, 361, 466, 273, 458, 460, 309, 390, 361, 373, 335, 464, 441, 376, 412, 295, 351, 331, 399, 350, 539, 320, 360, 322, 446, 455, 408, 361, 384, 394, 217, 402, 431, 446, 285, 426, 418, 281, 392, 495, 376, 367, 392, 382, 449, 366, 368, 281, 346, 441, 348, 360, 335, 395, 397, 367, 318, 335, 342, 332, 350, 432, 387, 376, 420, 363, 358, 394, 340, 307, 491, 463, 543, 408, 337, 360, 297, 413, 395, 531, 442, 337, 401, 406, 337, 548, 365, 426, 439, 396, 323, 332, 340, 532, 356, 357, 342, 335, 522, 410, 457, 330, 475, 343, 421, 397, 315, 414, 365, 345, 373, 343, 311, 447, 403, 469, 367, 466, 319, 360, 434, 481, 425, 305, 391, 441, 388, 425, 406, 309, 312, 341, 333, 403, 457, 432, 347, 321, 362, 392, 412, 465, 324, 474, 279, 275, 387, 341, 406, 393, 404, 368, 348, 375, 378, 415, 351, 346, 414, 324, 320, 332, 426, 407, 425, 340, 339, 470, 408, 352, 305, 391, 305, 357, 423, 397, 350, 428, 530, 379, 457, 351, 432, 268, 421, 357, 355, 417, 369, 609, 394, 336, 230, 324, 376, 343, 398, 334, 382, 454, 376, 323, 484, 307, 426, 350, 383, 511, 336, 356, 317, 422, 337, 412, 335, 333, 485, 342, 408, 505, 355, 325, 243, 352, 299, 463, 369, 450, 369, 475, 410, 356, 512, 470, 373, 408, 388, 322, 432, 388, 403, 385, 359, 430, 444, 420, 410, 365, 362, 492, 422, 454, 449, 303, 355, 339, 469, 456, 396, 428, 379, 439, 332, 433, 410, 406, 365, 324, 426, 440, 301, 365, 375, 357, 262, 385, 314, 496, 438, 372, 355, 401, 316, 397, 313, 431, 354, 296, 411, 306, 306, 400, 557, 472, 309, 434, 446, 353, 311, 449, 313, 361, 296, 368, 384, 363, 462, 324, 416, 519, 429, 294, 394, 365, 396, 385, 379, 328, 383, 302, 341, 339, 294, 364, 289, 454, 265, 412, 324, 434, 400, 388, 506, 407, 392, 362, 435, 478, 294, 372, 331, 529, 367, 314, 391, 368, 411, 380, 459, 344, 433, 464, 465, 354, 416, 340, 357, 344, 330, 416, 253, 355, 436, 547, 400, 328, 356, 362, 319, 348, 522, 468, 298, 365, 391, 418, 537, 370, 361, 396, 402, 344, 328, 294, 371, 420, 413, 368, 430, 295, 537, 416, 390, 376, 402, 441, 372, 399, 349, 431, 329, 424, 368, 419, 486, 296, 333, 388, 360, 376, 322, 357, 461, 383, 386, 402, 480, 535, 377, 366, 380, 371, 307, 297, 413, 396, 306, 412, 513, 443, 311, 309, 533, 305, 436, 348, 445, 426, 419, 451, 466, 413, 432, 349, 381, 389, 374, 405, 402, 417, 402, 427, 441, 320, 364, 347, 364, 425, 357, 334, 331, 488, 497, 379, 414, 392, 487, 356, 324, 382, 429, 449, 318, 516, 273, 349, 546, 343, 347, 346, 424, 416, 535, 369, 391, 310, 252, 356, 283, 284, 369, 342, 473, 427, 403, 427, 357, 570, 396, 305, 343, 298, 368, 422, 398, 382, 408, 352, 449, 424, 389, 377, 317, 331, 455, 538, 379, 378, 403, 337, 376, 361, 350, 423, 388, 293, 361, 380, 443, 400, 293, 295, 387, 332, 436, 416, 452, 381, 391, 325, 372, 460, 348, 315, 316, 348, 365, 332, 402, 289, 360, 299, 412, 385, 317, 389, 469, 422, 326, 337, 426, 425, 482, 245, 395, 390, 332, 394, 315, 404, 321, 374, 436, 465, 381, 438, 388, 556, 345, 354, 427, 314, 274, 388, 436, 406, 318, 359, 449, 403, 356, 301, 430, 258, 357, 376, 416, 432, 439, 443, 338, 464, 367, 355, 330, 454, 402, 452, 278, 314, 486, 356, 374, 334, 290, 359, 425, 338, 443, 435, 448, 436, 419, 399, 357, 252, 261, 479, 389, 337, 489, 358, 281, 346, 361, 315, 482, 434, 393, 413, 309, 366, 536, 389, 428, 335, 324, 360, 378, 443, 334, 313, 379, 355, 325, 403, 376, 291, 499, 360, 370, 329, 356, 401, 314, 329, 323, 375, 307, 481, 428, 397, 568, 354, 322, 393, 342, 354, 254, 399, 384, 348, 429, 339, 426, 305, 420, 364, 395, 481, 334, 399, 391, 367, 410, 385, 286, 374, 337, 355, 319, 421, 401, 340, 447]

# print(statistics.mean(ppi_total))
# print(statistics.pstdev(ppi_total))



with open('A:\\Downloads\\Projects\\workFromHome\\Projects\\Covid\\COVID19_GDDS_nodes.csv', 'r') as nodecsv: # Open the file                       
	nodereader = csv.reader(nodecsv) # Read the csv  
	nodes = [n for n in nodereader][1:]                     
	node_names = [n[0] for n in nodes] # Get a list of only the node names 

with open('A:\\Downloads\\Projects\\workFromHome\\Projects\\Covid\\COVID19_GDDS_edges.csv', 'r') as edgecsv: # Open the file
	edgereader = csv.reader(edgecsv) # Read the csv     
	edges = [tuple(e) for e in edgereader][1:] # Retrieve the data

G_covid = nx.Graph()
G_covid.add_nodes_from(node_names)
G_covid.add_edges_from(edges)

descr_dict_covid = {}
for node in nodes: 
	descr_dict_covid[node[0]] = node[2]

ppi = 0
for u,v,c in G_covid.edges(data=True) :	
	if (descr_dict_covid[u] == 'Human PPI (target)' and descr_dict_covid[v] == 'Human PPI (target)') :
		ppi = ppi + 1


print("ppi", ppi)	

stop = timeit.default_timer()
print(stop - start)  



